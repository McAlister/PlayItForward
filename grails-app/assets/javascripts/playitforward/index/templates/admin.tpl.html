
<div role="main">

    <div class="bounty-tabs">
        <ul>
            <li ng-class="tabClass('artists')" ng-click="activate('artists')">Artists</li>
            <li ng-class="tabClass('events')" ng-click="activate('events')">Events</li>
            <li ng-class="tabClass('prizes')" ng-click="activate('prizes')" >Prizes</li>
            <li ng-class="tabClass('winners')" ng-click="activate('winners')">Winners</li>
            <li ng-class="tabClass('players')" ng-click="activate('players')">Players</li>
            <li ng-class="tabClass('files')" ng-click="activate('files')">Images</li>
        </ul>
    </div>


    <!--prizes-->

    <div id="admin-prizes" ng-show="isActiveTab('prizes')">

        <div class="alert alert-danger" ng-show="prizeData.prizeError">

            There was a problem retrieving the prize list.

            <br />

            {{prizeData.prizeError}}

        </div>

        <div ng-show="prizeData.prizeError == '' && prizesLoaded && eventsLoaded">

            <h1>Add/Edit:</h1>

            <div class="gp-dropdown">
                <!--suppress HtmlFormInputWithoutLabel -->
                <select name="prizeSelect" id="prizeSelect" ng-model="currentEvent"
                        ng-options="event.name for event in (winnerData.eventList | filter:prizeData.currentYear) track by event.id"
                        ng-change="selectEvent()">
                </select>
            </div>

            <div class="gp-dropdown">
                <select name="yearSelectPrize" id="yearSelectPrize" ng-model="prizeData.currentYear"
                        ng-options="year for year in prizeData.allYears"
                        ng-change="selectYear()" title="yearSelectPrizeTitle">
                </select>
            </div>

            <form ng-submit="createPrize()" class="form">

                <div class="form-group">
                    <label for="inputDonorName" class="control-label">Donor:</label>
                    <input type="text" id="inputDonorName" class="form-control" placeholder="Donor" ng-model="prizeData.newDonor" required>
                </div>

                <div class="form-group">
                    <label for="inputPrize" class="control-label">Prize:</label>
                    <input type="text" id="inputPrize" class="form-control" placeholder="Prize" ng-model="prizeData.newPrize" required>
                </div>


                <button class="btn btn-primary center-block" type="submit">Add</button>

            </form>

            <br/>

            <table class="table table-bordered table-striped">

                <thead>
                <tr>
                    <th>
                        <a href ng-click="bountyArray.sortType = 'donor'; bountyArray.sortReverse = !bountyArray.sortReverse">
                            Donor
                            <span ng-show="sortType == 'donor' && !bountyArray.sortReverse" class="fa fa-caret-down"></span>
                            <span ng-show="sortType == 'donor' && bountyArray.sortReverse" class="fa fa-caret-up"></span>
                        </a>
                    </th>
                    <th>
                        <a href ng-click="bountyArray.sortType = 'prize'; bountyArray.sortReverse = !bountyArray.sortReverse">
                            Prize
                            <span ng-show="sortType == 'prize' && !sortReverse" class="fa fa-caret-down"></span>
                            <span ng-show="sortType == 'prize' && sortReverse" class="fa fa-caret-up"></span>
                        </a>
                    </th>
                    <th>
                        <a href ng-click="bountyArray.sortType = 'actions'; bountyArray.sortReverse = !bountyArray.sortReverse">
                            Actions
                            <span ng-show="sortType == 'prize' && !sortReverse" class="fa fa-caret-down"></span>
                            <span ng-show="sortType == 'prize' && sortReverse" class="fa fa-caret-up"></span>
                        </a>
                    </th>
                </tr>
                </thead>

                <tbody>
                <tr ng-repeat="bounty in getPrizeList() | orderBy:bountyArray.sortType:bountyArray.sortReverse">
                    <td>{{ bounty.donor }}</td>
                    <td>{{ bounty.prize }}</td>
                    <td><button class="btn btn-primary center-block" type="submit" ng-click="deletePrize(bounty)">Delete</button></td>
                </tr>
                </tbody>

            </table>

        </div>

    </div>

    <!--winners-->

    <div id="admin-winners" ng-show="isActiveTab('winners')">

        <div class="alert alert-danger" ng-show="winnerData.winnerError">

            There was a problem retrieving the winner list.

            <br />

            {{winnerData.winnerError}}

        </div>

        <div ng-show="winnerData.winnerError=='' && prizesLoaded && eventsLoaded">

            <h1>Add/Edit:</h1>

            <div class="gp-dropdown">
                <!--suppress HtmlFormInputWithoutLabel -->
                <select name="winnerSelect" id="winnerSelect" ng-model="currentEvent"
                        ng-options="event.name for event in (winnerData.eventList | filter:prizeData.currentYear) track by event.id"
                        ng-change="selectEvent()">
                </select>
            </div>

            <div class="gp-dropdown">
                <select name="yearSelectWinner" id="yearSelectWinner" ng-model="prizeData.currentYear"
                        ng-options="year for year in prizeData.allYears"
                        ng-change="selectYear()" title="yearSelectWinnerTitle">
                </select>
            </div>

            <form ng-submit="upsertWinner()" class="form">

                <div class="form-group">
                    <label for="inputWinnerName" class="control-label">Name:</label>
                    <input type="text" id="inputWinnerName" class="form-control" placeholder="Name" ng-model="winnerData.currentWinner.name" required>
                </div>

                <div class="form-group">
                    <label for="inputRank" class="control-label">Rank:</label>
                    <input type="text" id="inputRank" class="form-control" placeholder="Rank" ng-model="winnerData.currentWinner.ranking" required>
                </div>

                <div class="form-group">
                    <label for="inputRecord" class="control-label">Record:</label>
                    <input type="text" id="inputRecord" class="form-control" placeholder="Record" ng-model="winnerData.currentWinner.record" required >
                </div>

                <div class="form-group">
                    <label for="inputWinnerImage" class="control-label">Image:</label>
                    <input type="text" id="inputWinnerImage" class="form-control" placeholder="Image" ng-model="winnerData.currentWinner.imageName" required >
                </div>

                <div class="form-group">
                    <label for="inputBlurb" class="control-label">Blurb:</label>
                    <textarea cols="40" rows="5" id="inputBlurb" class="form-control"
                              ng-model="winnerData.currentWinner.blurb" required>
                </textarea>
                </div>

                <button class="btn btn-primary center-block" type="submit">Add/Edit</button>

            </form>

        </div>

    </div>

    <!--players-->

    <div id="admin-players" ng-show="isActiveTab('players')">

        <h1>Leading Ladies:</h1>

        <div class="alert alert-danger" ng-show="playerData.playerError">

            There was a problem retrieving the player list.

            <br />

            {{playerData.playerError}}

        </div>

        <div class="gp-dropdown">
            <!--suppress HtmlFormInputWithoutLabel -->
            <select name="playerSelect" id="playerSelect" ng-model="playerData.currentPlayer"
                    ng-options="player.name for player in playerData.playerList | orderBy: 'name' track by player.id" >
                <option value="" disabled selected hidden>Create New Player ...</option>
            </select>
        </div>

        <form ng-submit="upsertPlayer()" class="form">

            <div class="form-group">
                <label for="inputPlayerName" class="control-label">Name in Standings:</label>
                <input type="text" id="inputPlayerName" class="form-control" placeholder="Aiken, Simone [US]"
                       ng-model="playerData.currentPlayer.name" required>
            </div>

            <div class="form-group">
                <label for="inputPlayerAlias" class="control-label">Alias:</label>
                <input type="text" id="inputPlayerAlias" class="form-control" placeholder="Alias"
                       ng-model="playerData.currentPlayer.alias" required>
            </div>

            <div class="form-group">
                <label for="inputPlayerImageName" class="control-label">Image Name:</label>
                <input type="text" id="inputPlayerImageName" class="form-control" placeholder="Image Name"
                       ng-model="playerData.currentPlayer.imgUrl" required >
            </div>

            <div class="form-group">
                <label>Is Woman: <input type="checkbox" ng-model="playerData.currentPlayer.isWoman"
                                        ng-true-value="true" ng-false-value="false" checked="checked">
                </label>
            </div>

            <div class="text-center">
                <button class="btn btn-primary" type="button" ng-click="addNewPlayerSetup()">Clear</button>
                <button class="btn btn-primary" type="submit" ng-show="playerData.currentPlayer.id">Edit</button>
                <button class="btn btn-primary" type="submit" ng-hide="playerData.currentPlayer.id">Add</button>
            </div>

        </form>

        <br/>

        <form>
            <div class="form-group">
                <div class="input-group">
                    <div class="input-group-addon"><i class="fa fa-search"></i></div>
                    <input type="text" class="form-control" placeholder="Search Players"
                           ng-change="filterPlayers()" ng-model="playerData.searchString">
                </div>
            </div>
        </form>

        <table class="table table-bordered table-striped">

            <thead>
            <tr>
                <th>
                    <a href ng-click="sortPlayers('imgUrl')">
                        Image
                        <span ng-show="playerData.sortType == 'imgUrl' && !playerData.sortReverse" class="fa fa-caret-down"></span>
                        <span ng-show="playerData.sortType == 'imgUrl' && playerData.sortReverse" class="fa fa-caret-up"></span>
                    </a>
                </th>
                <th>
                    <a href ng-click="sortPlayers('name')">
                        Name
                        <span ng-show="playerData.sortType == 'name' && !playerData.sortReverse" class="fa fa-caret-down"></span>
                        <span ng-show="playerData.sortType == 'name' && playerData.sortReverse" class="fa fa-caret-up"></span>
                    </a>
                </th>
                <th>
                    <a href ng-click="sortPlayers('alias')">
                        Alias
                        <span ng-show="playerData.sortType == 'alias' && !playerData.sortReverse" class="fa fa-caret-down"></span>
                        <span ng-show="playerData.sortType == 'alias' && playerData.sortReverse" class="fa fa-caret-up"></span>
                    </a>
                </th>
            </tr>
            </thead>

            <tbody>
                <tr ng-repeat="player in playerData.pagedPlayers[playerData.currentPage]">
                    <td>{{ player.imgUrl }}</td>
                    <td>{{ player.name }}</td>
                    <td>{{ player.alias }}</td>
                </tr>
            </tbody>

            <tfoot>


            </tfoot>

        </table>

        <div class="tableControl pull-right">

            <ul>

                <li ng-class="{disabled: playerData.currentPage == 0}">
                    <a href ng-click="prevPlayerPage()">«</a>
                </li>

                <li ng-repeat="n in playerTableRange()"
                    ng-class="{active: n == playerData.currentPage}" ng-click="setPlayerPage(n)">

                    <a href ng-bind="n + 1">1</a>
                </li>

                <li ng-class="{disabled: (currentPage) == layerData.pagedPlayers.length - 1}">
                    <a href class="button" ng-click="nextPlayerPage()">»</a>
                </li>

            </ul>

        </div>

    </div>

    <!--file upload-->

    <div id="admin-files" ng-show="isActiveTab('files')">

        <h1>Manage Files:</h1>

        <div class="alert alert-danger" ng-show="fileData.fileError">

            There was a problem uploading the file.

            <br />

            {{fileData.fileError}}

        </div>


        <form ng-submit="uploadFile()" class="form">

            <div class="form-group">
                <label for="inputPath" class="control-label">Path:</label><br/>
                <select name="inputPath" id="inputPath" ng-model="fileData.path" >
                    <option value="images/winners">winners</option>
                    <option value="images/race">race</option>
                    <option value="images/race/ovals">oval</option>
                    <option value="images/playmatArt">playmat art</option>
                </select>
            </div>

            <div class="form-group">
                <label for="inputFile" class="control-label">Image:</label>
                <input id="inputFile" type="file" ng-file-select="onFileSelect($files)">
            </div>

            <button class="btn btn-primary center-block" type="submit">Upload</button>

        </form>

        <br/>

        <img ng-show="showImage" ng-src="{{imageSrc}}" />

    </div>

    <!--events-->

    <div id="admin-events" ng-show="isActiveTab('events')">

        <h1>Manage Events:</h1>

        <div class="gp-dropdown">
            <!--suppress HtmlFormInputWithoutLabel -->
            <select name="eventSelect" id="eventSelect" ng-model="currentEvent"
                    ng-options="event.name for event in (winnerData.eventList | filter:prizeData.currentYear) track by event.id"
                    ng-change="selectEvent()">
            </select>
        </div>

        <div class="gp-dropdown">
            <select name="yearSelectEvent" id="yearSelect" ng-model="prizeData.currentYear"
                    ng-options="year for year in prizeData.allYears"
                    ng-change="selectYear()" title="yearSelectPrizeTitle">
            </select>
        </div>

        <form ng-submit="upsertEvent()" class="form">

            <div class="form-group">
                <label for="inputEventName" class="control-label">Name:</label>
                <input type="text" id="inputEventName" class="form-control"
                       ng-model="currentEvent.name" required>
            </div>

            <div class="form-group">
                <label for="inputEvenFormat" class="control-label">Format:</label>
                <input type="text" id="inputEvenFormat" class="form-control"
                       ng-model="currentEvent.eventFormat" required>
            </div>

            <div class="form-group">
                <label for="inputEvenCode" class="control-label">Event Code:</label>
                <input type="text" id="inputEvenCode" class="form-control"
                       ng-model="currentEvent.eventCode" >
            </div>

            <div class="form-group">
                <label for="inputEvenStart" class="control-label">Start Date:</label>
                <input type="date" id="inputEvenStart" class="form-control"
                       ng-model="currentEvent.startDate" required>
            </div>

            <div class="form-group">
                <label for="inputEventEnd" class="control-label">End Date:</label>
                <input type="date" id="inputEventEnd" class="form-control"
                       ng-model="currentEvent.endDate" required>
            </div>

            <div class="form-group">
                <label for="inputEventType" class="control-label">Type:</label>
                <select name="inputEventType" id="inputEventType" ng-model="eventData.currentType"
                        ng-options="type.description for type in eventData.types"
                        class="form-control">
                </select>
            </div>

            <div class="form-group">
                <label for="inputEventOrganizer" class="control-label">Organizer:</label>
                <select name="inputEventType" id="inputEventOrganizer" ng-model="eventData.currentOrganizer"
                        ng-options="org.name for org in eventData.organizers"
                        class="form-control">
                </select>
            </div>

            <div class="text-center">
                <button class="btn btn-primary" type="button" ng-click="addNewEventSetup()">Clear</button>
                <button class="btn btn-primary" type="submit" ng-show="currentEvent.id">Edit</button>
                <button class="btn btn-primary" type="submit" ng-hide="currentEvent.id">Add</button>
            </div>

        </form>

    </div>

    <!--artists -->

    <div id="admin-artists" ng-show="isActiveTab('artists')">

        <h1>Artists:</h1>

        <div class="alert alert-danger" ng-show="artistArray.artistError">

            There was a problem retrieving the artist list.

            <br />

            {{artistArray.artistError}}

        </div>

        <div class="gp-dropdown">
            <!--suppress HtmlFormInputWithoutLabel -->
            <select name="artistSelect" id="artistSelect" ng-model="artistArray.currentArtist"
                    ng-options="artist.name for artist in artistArray.artistList | orderBy: 'name' track by artist.id" >
                <option value="" disabled selected hidden>Create New Artist ...</option>
            </select>
        </div>

        <form ng-submit="upsertArtist()" class="form">

            <div class="form-group">
                <label for="inputArtistName" class="control-label">Name:</label>
                <input type="text" id="inputArtistName" class="form-control"
                       ng-model="artistArray.currentArtist.name" required>
            </div>

            <div class="form-group">
                <label for="inputArtistBlurb" class="control-label">Blurb:</label>
                <textarea cols="40" rows="5" id="inputArtistBlurb" class="form-control"
                          ng-model="artistArray.currentArtist.blurb" required>
                </textarea>
            </div>

            <div class="form-group">
                <label for="inputArtistWebsite" class="control-label">Website:</label>
                <input type="text" id="inputArtistWebsite" class="form-control"
                       ng-model="artistArray.currentArtist.webSiteUrl" >
            </div>

            <div class="form-group">
                <label for="inputArtistDeviant" class="control-label">Deviant Art:</label>
                <input type="text" id="inputArtistDeviant" class="form-control"
                       ng-model="artistArray.currentArtist.deviantArtUrl" >
            </div>

            <div class="form-group">
                <label for="inputArtistFacebook" class="control-label">Facebook:</label>
                <input type="text" id="inputArtistFacebook" class="form-control"
                       ng-model="artistArray.currentArtist.facebookUrl" >
            </div>

            <div class="form-group">
                <label for="inputArtistPatreon" class="control-label">Patreon:</label>
                <input type="text" id="inputArtistPatreon" class="form-control"
                       ng-model="artistArray.currentArtist.patreonUrl" >
            </div>

            <div class="text-center">
                <button class="btn btn-primary" type="button" ng-click="addNewPlayerSetup()">Clear</button>
                <button class="btn btn-primary" type="submit" ng-show="artistArray.currentArtist.id">Edit</button>
                <button class="btn btn-primary" type="submit" ng-hide="artistArray.currentArtist.id">Add</button>
            </div>

        </form>

        <br/>

    </div>

</div>