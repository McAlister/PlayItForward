
<!--suppress HtmlUnknownTarget, JSUnresolvedVariable, JSUnresolvedVariable -->

<div role="main">

    <div class="gp-dropdown">
        <select name="eventSelect" id="eventSelect" ng-model="GPs.currentEvent"
                ng-options="option.name for option in (GPs.allEvents | filter:GPs.currentYear) track by option.id"
                ng-change="selectEvent()" title="eventSelectTitle">

        </select>
    </div>

    <div class="gp-dropdown">
        <select name="yearSelect" id="yearSelect" ng-model="GPs.currentYear"
                ng-options="year for year in GPs.allYears"
                ng-change="selectYear()" title="yearSelectTitle">
        </select>
    </div>

    <div class="bounty-tabs">
        <ul>
            <li ng-class="tabClass('summary')" ng-click="activate('summary')">Winner</li>
            <li ng-class="tabClass('playmat')" ng-click="activate('playmat')" >Playmat</li>
            <li ng-class="tabClass('bounties')" ng-click="activate('bounties')">Prizes</li>
            <li ng-class="tabClass('race')" ng-click="activate('race')"
                ng-show="!isFutureGP()">Standings</li>
        </ul>
    </div>

    <!--winner-->

    <div id="gp-summary" ng-show="isActiveTab('summary')">

        <div ng-show="isFutureGP()" >

            {{GPs.currentEvent.name}} will begin on {{gpStartDateString()}}.

            <br/>

            May the odds be ever in your favor.

        </div>

        <div ng-if="!isFutureGP()" >

            <div class="section">
                <p><b>Name:</b> {{GPs.eventWinners[GPs.currentEvent.id].name}}</p>
                <p><b>Rank:</b> {{GPs.eventWinners[GPs.currentEvent.id].ranking}}</p>
                <p><b>Record:</b> {{GPs.eventWinners[GPs.currentEvent.id].record}}</p>
            </div>

            <p>
                <img class="winner-image" ng-src="{{getWinnerImageName()}}" />
            </p>

            <p class="blurb">
                {{GPs.eventWinners[GPs.currentEvent.id].blurb}}
            </p>

        </div>

    </div>

    <!--playmat-->

    <div id="gp-playmat" ng-show="isActiveTab('playmat')">

        <div ng-if="artLoaded && GPs.currentEvent">

            <p>
                <span class="artTitle">{{getActiveArt().title}}</span> by
                <span class="artist">{{getActiveArt().artist}}</span>
            </p>

            <p>
                <img class="playmat-image" ng-src="{{getImageName()}}" />
            </p>

            <p>
                {{getActiveArt().blurb}}
            </p>

            <div class="socialIconsDiv">

                <a target="_blank" ng-show="getActiveArt().website" href="{{getActiveArt().website}}">
                    <img src="/assets/socialmedia/website.png" class="artistLinkImage"/>
                </a>

                <a target="_blank" ng-show="getActiveArt().patreon" href="{{getActiveArt().patreon}}">
                    <img ng-show="getActiveArt().patreon" src="/assets/socialmedia/patreon.png" class="artistLinkImage"/>
                </a>

                <a target="_blank" ng-show="getActiveArt().deviant" href="{{getActiveArt().deviant}}">
                    <img ng-show="getActiveArt().deviant" src="/assets/socialmedia/deviantart.png" class="artistLinkImage"/>
                </a>

                <a target="_blank" ng-show="getActiveArt().facebook" href="{{getActiveArt().facebook}}">
                    <img ng-show="getActiveArt().facebook" src="/assets/socialmedia/facebook.png" class="artistLinkImage"/>
                </a>

            </div>

            <p class="center">
                Playmats provided by our heroes at <a href="http://gamermats.com/">GamerMats</a>.
            </p>

        </div>

    </div>

    <!--prizes-->

    <div id="gp-bounties" ng-show="isActiveTab('bounties')">

        <div ng-hide="bountiesExist()" >

            <a href="mailto:play_it_forward@outlook.com" class="navigation-link">
                Contact Us
            </a> about donating additional bounties.

        </div>

        <p ng-show="bountiesExist()">
            In addition to the Play It Forward playmat, members of the community have
            donated the following prizes to the leading lady in day two:
        </p>

        <div class='has-error' ng-show="bountyArray.errorMessage">
            Error: Unable to load Bounties.
        </div>

        <table class="table table-bordered table-striped" ng-show="bountiesExist()">

            <thead>
            <tr>
                <th>
                    <a href ng-click="bountyArray.sortType = 'donor'; bountyArray.sortReverse = !bountyArray.sortReverse">
                        Donor
                        <span ng-show="sortType == 'donor' && !bountyArray.sortReverse" class="fa fa-caret-down"></span>
                        <span ng-show="sortType == 'donor' && bountyArray.sortReverse" class="fa fa-caret-up"></span>
                    </a>
                </th>
                <th>
                    <a href ng-click="bountyArray.sortType = 'prize'; bountyArray.sortReverse = !bountyArray.sortReverse">
                        Prize
                        <span ng-show="sortType == 'prize' && !sortReverse" class="fa fa-caret-down"></span>
                        <span ng-show="sortType == 'prize' && sortReverse" class="fa fa-caret-up"></span>
                    </a>
                </th>
            </tr>
            </thead>

            <tbody>
            <tr ng-repeat="bounty in bountyArray.bounties | orderBy:bountyArray.sortType:bountyArray.sortReverse | filter:GPs.currentEvent.name">
                <td>{{ bounty.donor }}</td>
                <td>{{ bounty.prize }}</td>
            </tr>
            </tbody>

        </table>

    </div>

    <!--horse race-->

    <div id="gp-race" ng-if="isActiveTab('race')">

        <div ng-if="isFutureGP()">
            <p>

                This event hasn't happened yet.

            </p>
        </div>

        <div ng-if="!isFutureGP()">
            <p>

                This animation represents the standings of the women and
                non-binary players in the chosen GP from round to round.
                In respect for women who wish to remain anonymous we are using
                random names and avatars by default.  To update your name and/or
                avatar <a href="mailto:play_it_forward@outlook.com">contact us</a>.
                You can use your real name/picture or any pseudonym/avatar you desire.

            </p>

            <iframe ng-if="!isFutureGP()" ng-src="{{getHorseraceSrc()}}" frameborder="0" width="100%" height="600px"></iframe>
        </div>

    </div>

</div>

