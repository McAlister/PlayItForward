
<!--suppress HtmlUnknownTarget, JSUnresolvedVariable, JSUnresolvedVariable -->

<div role="main">

    <div class="gp-dropdown">
        <select name="eventSelect" id="eventSelect" ng-model="eventService.currentEvent"
                ng-options="event.name + ' - ' + event.eventFormat for event in (eventService.events | filter:eventService.currentYear) track by event.id"
                ng-change="eventService.selectedEvent()" title="eventSelectTitle">

        </select>
    </div>

    <div class="gp-dropdown">
        <select name="yearSelect" id="yearSelect" ng-model="eventService.currentYear"
                ng-options="year for year in eventService.years"
                ng-change="eventService.selectedYear()" title="yearSelectTitle">
        </select>
    </div>

    <div class="bounty-tabs">
        <ul>
            <li ng-class="tabService.tabClass('GPs', 'winner')" ng-click="tabService.activateTab('GPs', 'winner')">Winner</li>
            <li ng-class="tabService.tabClass('GPs', 'playmat')" ng-click="tabService.activateTab('GPs', 'playmat')" >Playmat</li>
            <li ng-class="tabService.tabClass('GPs', 'race')" ng-click="tabService.activateTab('GPs', 'race')"
                ng-show="!isFutureGP()">Standings
            </li>
            <li ng-class="tabService.tabClass('GPs', 'org')" ng-click="tabService.activateTab('GPs', 'org')">Organization Stuff</li>
        </ul>
    </div>

    <!--loading-->

    <div id="gp-loading" ng-show="!eventService.eventsLoaded">

        <p>Loading Event Data ...</p>

    </div>

    <!--winner-->

    <div id="gp-summary" ng-show="tabService.isActiveTab('GPs', 'winner')">

        <div class="alert alert-danger" ng-show="winnerError">

            There was a problem retrieving winner information.

            <br />

            {{winnerError}}

        </div>

        <div ng-show="eventService.eventsLoaded && isFutureGP()" >

            {{eventService.currentEvent.name}} will begin on {{gpStartDateString()}}.

            <br/>

            You got this.

        </div>

        <div ng-if="winnersLoaded && !isFutureGP()" >

            <div class="section">
                <p><b>Name:</b> {{getCurrentWinner().name}}</p>
                <p><b>Rank:</b> {{getCurrentWinner().ranking}}</p>
                <p><b>Record:</b> {{getCurrentWinner().record}}</p>
            </div>

            <p>
                <img class="winner-image" ng-src="{{getWinnerImageName()}}"
                    on-error-src="assets/winners/Unknown.jpg"/>
            </p>

            <p class="blurb">
                {{getCurrentWinner().blurb}}
            </p>

        </div>

    </div>

    <!--playmat-->

    <div id="gp-playmat" ng-show="tabService.isActiveTab('GPs', 'playmat')">

        <div class="alert alert-danger" ng-show="artError || artistsError">

            There was a problem retrieving art information

            <br />

            {{artistsError}}

            {{artError}}

        </div>

        <div ng-if="artLoaded && artistsLoaded && eventService.eventsLoaded && eventService.currentEvent">

            <p>
                <span class="artTitle">{{getCurrentArt().title}}</span>
                <span ng-show="getCurrentArtist()">by</span>
                <span class="artist">{{getCurrentArtist().name}}</span>
            </p>

            <p>
                <img class="playmat-image" ng-src="{{eventService.currentEvent.matUrl}}"
                     on-error-src="assets/ComingSoon.jpg" />
            </p>

            <p>
                {{etCurrentArtist().blurb}}
            </p>

            <div class="socialIconsDiv">

                <a target="_blank" ng-show="getCurrentArtist().webSiteUrl" href="{{getCurrentArtist().webSiteUrl}}">
                    <img src="/assets/socialmedia/website.png" class="artistLinkImage"/>
                </a>

                <a target="_blank" ng-show="getCurrentArtist().patreonUrl" href="{{getCurrentArtist().patreonUrl}}">
                    <img src="/assets/socialmedia/patreon.png" class="artistLinkImage"/>
                </a>

                <a target="_blank" ng-show="getCurrentArtist().deviantArtUrl" href="{{getCurrentArtist().deviantArtUrl}}">
                    <img src="/assets/socialmedia/deviantart.png" class="artistLinkImage"/>
                </a>

                <a target="_blank" ng-show="getCurrentArtist().facebookUrl" href="{{getCurrentArtist().facebookUrl}}">
                    <img src="/assets/socialmedia/facebook.png" class="artistLinkImage"/>
                </a>

            </div>

            <br />

            <p ng-show="getCurrentArt().purchaseUrl" class="center">
                Purchase a print of this art <a target="_blank" href="{{getCurrentArt().purchaseUrl}}">here</a>.
            </p>

            <p class="center">
                Playmats provided by the heroes at <a href="http://gamermats.com/">GamerMats</a>.
            </p>

        </div>

    </div>

    <!--prizes-->

    <div id="gp-bounties" ng-show="tabService.isActiveTab('GPs', 'org')">

        <div class="alert alert-danger" ng-show="bountyArray.error">

            There was a problem retrieving prize information

            <br />

            {{bountyArray.error}}

        </div>

        <p>
            <b>Event Coordinator</b>: {{eventService.currentEvent.coordinator}}
        </p>


        <p ng-show="bountiesExist()">
            In addition to the Play It Forward playmat, members of the community have
            donated the following prizes to the leading lady in day two.  Please work
            with the event coordinator to deliver prizes:
        </p>

        <table class="table table-bordered table-striped" ng-show="bountiesExist()">

            <thead>
            <tr>
                <th>
                    <a href ng-click="bountyArray.sortType = 'donor'; bountyArray.sortReverse = !bountyArray.sortReverse">
                        Donor
                        <span ng-show="sortType == 'donor' && !bountyArray.sortReverse" class="fa fa-caret-down"></span>
                        <span ng-show="sortType == 'donor' && bountyArray.sortReverse" class="fa fa-caret-up"></span>
                    </a>
                </th>
                <th>
                    <a href ng-click="bountyArray.sortType = 'prize'; bountyArray.sortReverse = !bountyArray.sortReverse">
                        Prize
                        <span ng-show="sortType == 'prize' && !sortReverse" class="fa fa-caret-down"></span>
                        <span ng-show="sortType == 'prize' && sortReverse" class="fa fa-caret-up"></span>
                    </a>
                </th>
            </tr>
            </thead>

            <tbody>
            <tr ng-repeat="bounty in getPrizeList() | orderBy:bountyArray.sortType:bountyArray.sortReverse">
                <td>{{ bounty.donor }}</td>
                <td>{{ bounty.prize }}</td>
            </tr>
            </tbody>

        </table>

    </div>

    <!--horse race-->

    <div id="gp-race" ng-if="tabService.isActiveTab('GPs', 'race')">

        <div ng-if="!isFutureGP()">

            <iframe ng-if="!isFutureGP()" ng-src="{{getHorseRaceSrc()}}" frameborder="0" width="100%" height="600px"></iframe>

            <p class="text-right"><small><a href="{{getHorseRaceSrc()}}">(full-screen)</a></small></p>

            <p>

                This animation represents the standings of the women and
                non-binary players in the chosen GP from round to round.
                To update your name and/or
                avatar <a href="mailto:play_it_forward@outlook.com">contact us</a>.
                You can use your real name/picture or any pseudonym/avatar you desire.

            </p>

        </div>

    </div>

</div>

